
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online CV Generator</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-left">
        <div class="logo">
          <img src="images/bear.png" alt="Logo" />
        </div>
        <nav>
          <a href="#">Home</a>
          <a href="#">About</a>
          <a href="#">Contact</a>
        </nav>
      </div>
      <div class="navbar-right">
        <a href="login.html" class="btn btn-login">Login</a>
        <a href="signup.html" class="btn btn-signup">Sign up</a>
       <img src="images/user_avatar.svg" alt="user_avatar" class="navbar-avatar-img"/>  
      </div>
    </header>

    <main class="hero-section">
      <div class="hero-content-left">
        <p class="intro-text">
          Welcome to our online CV generator, the ultimate tool for crafting a
          polished and professional resume. Our intuitive platform guides you
          through a seamless, step-by-step process, offering a wide selection of
          expertly designed templates to make your profile stand out. Forget the
          hassle of formatting and focus on what truly matters: showcasing your
          skills and experience. Let us help you create a compelling CV in
          minutes and take the next confident step in your career journey.
        </p>
        <div class="cta-buttons">
          <a href="create.html" class="btn btn-primary">Create Your Own CV</a>
          <button class="btn btn-secondary" onclick="openTemplatePicker()">Pick Templates</button>
        </div>
        <div class="social-icons">
          <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
          <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
        </div>
      </div>

      <!-- // Hero Image -->
      <div class="hero-image-right">
    <img src="images/cv1.jpg" alt="CV 1" class="layer-cv cv-1 floating-slow"/>
    <img src="images/cv2.jpg" alt="CV 2" class="layer-cv cv-2 floating-medium"/>
    <img src="images/cv3.jpg" alt="CV 3" class="layer-cv cv-3 floating-fast"/>

    <img src="images/Decorations1.png" alt="Mascot" class="layer-mascot floating-fast" />
    
    <div class="mascot-say">Start now <i class="fas fa-bolt" style="color: #ffc107;"></i></div>
</div>
    </main>
    <div id="templateModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2>Choose a Template</h2>
            <p>Select a design to start your CV</p>

            <div class="template-grid">
                <div class="template-card" onclick="selectTemplate(1)">
                    <img src="https://placehold.co/150x200/eee/333?text=Classic" alt="Classic">
                    <h3>1. Classic</h3>
                </div>

                <div class="template-card" onclick="selectTemplate(2)">
                    <img src="https://placehold.co/150x200/667eea/ffffff?text=Modern" alt="Modern">
                    <h3>2. Modern</h3>
                </div>

                <div class="template-card" onclick="selectTemplate(3)">
                    <img src="https://placehold.co/150x200/764ba2/ffffff?text=Creative" alt="Creative">
                    <h3>3. Creative</h3>
                </div>
            </div>
        </div>
    </div>

    <script>
        const currentUserId = 1; // Simulating logged-in user
        const modal = document.getElementById('templateModal');

        // 1. Open Modal
        function openTemplatePicker() {
            modal.style.display = 'flex';
        }

        // 2. Close Modal
        function closeModal() {
            modal.style.display = 'none';
        }

        // 3. Close if clicking outside
        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // 4. Handle Selection
        function selectTemplate(templateId) {
            const title = prompt("Great choice! Give your new CV a name:");
            
            if (title) {
                fetch('http://localhost:3000/api/create-cv', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: currentUserId, 
                        title: title,
                        templateId: templateId
                    })
                })
                .then(res => res.json())
                .then(data => {
                    alert("CV Created! Redirecting to your dashboard...");
                    window.location.href = 'profile.html';
                })
                .catch(err => {
                    console.error("Error:", err);
                    alert("Error connecting to server. Make sure node server.js is running!");
                });
            }
        }
    </script>
  </body>
</html>
